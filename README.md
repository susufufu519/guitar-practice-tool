自主吉他練習工具-README檔

可以去
https://drive.google.com/drive/folders/1tcIicYPYZ1ey4y9NSmRLEMuPgFvFqJhu?usp=drive_link
看有圖片解釋跟表格的readme

架構:
	程式功能:
	使用方式:
	開發步驟/日誌:
	程式架構
	總結
	參考資料來源

1.	程式功能:
目前階段的功能為:提供使用者輸入根音並選擇調式，程式會畫一張標示出絕對音，以及包含特別顏色表示根音的吉他指板圖給使用者練習吉他。


2.	使用方式:
啟動程式，按照互動式的問答即可。


3.	開發步驟/日誌:
(程式碼都是照步驟用chagpt生成，如果該步驟有用到好幾百字的較為複雜的指令我會把原始指令提供在步驟下方)
原本專案預期目標相當宏偉，但在製作過程之中，發現在生成指型的區域的除錯時間有點太久，嚴重低估製作時間，所以目前階段的功能為:提供使用者輸入根音並選擇調式，程式會畫一張標示出絕對音，以及包含特別顏色表示的根音的吉他指板圖給使用者練習。
由於最後的程式其實沒有花我很多時間，很大一部分的時間是我花在前面，想要用自己方式把程式建構起來。但我仍然覺得可以記錄一下這段過程，其中我規畫的一些函數也可以為之後要寫其他功能時創造一個比較友善的環境，所以也會在程式架構的敘述那邊加上去。

(1)	我讓chatgpt建立一個以list構成的12格電吉他指版，因為12格之後的內容基本上跟前12格是一樣的。
(2)	定義function叫做fret，他有兩個功能:其一，是可以讓我輸入絕對音，程式會跑出他在指板上第幾m弦第n格，也就是這個list的第[m-1][n]個位置，因為吉他有六條弦，所以我讓他輸出一個有六個內容的list，方便我之後要畫圖。其二是我輸入我要第幾弦第幾格的音，他也會顯示出來。
(3)	建立一個音符的循環週期叫做note_cycle，還有音程對應的半音數量轉換叫做interval_semitones，讓我之後用比較方便的寫法表示「大三度」，「完全五度」這種概念。
(4)	我想讓這個指板有音程以及12平均律的概念，所以我定義function叫做get_note_by_interval，他可以讓我輸入起始音，根音程，然後他把那顆我要的音print出來。
(5)	我建立一個用半音數量為單位的scale_patterns，他會把大調自然音階表示成:"major": [0, 2, 4, 5, 7, 9, 11]，同時如果之後要從後台加入其他音階，也相對方便操作。
(6)	定義函數叫做:generate_scale，他可以輸入起始音跟調式名稱，然後把那個調式的級數跟調內音print出來，比方說我輸入以下程式:
(7)	 (這裡調很久)定義一個函數叫做plot_guitar_fretboard，他會讓matplotlib畫一個空白的吉他指版，並且讓他點出第一弦第一格，並做一些名詞定義還有圖案的調整。
(8)	在這裡我開了另外一個檔案，我想要生成一個程式，他的運作邏輯跟我給chatgpt的原始指另如下:
我知道我如果輸入一個絕對音，函數fret會把絕對音換成位置輸出出來，現在我要寫一個新的code，並改寫fret這個函數，功能如下:
  1.	我要把fret對位置的輸出改成一個list。
  2.	新的函數我希望我可以輸入一連串絕對音，他把每一個裡面的絕對音用fret轉換出來在指板上位置，一個音存成一個list。
  3.	這個函數會把我輸入進去的第一個音(通常也是這個調式的一級)當作最低音，然後根據這個音的在指板上位置，挑一個弦數最大的出來，比方說(5,3)跟(6,8)，因為(6,8)弦數明顯最大，所以挑他出來當根音
  4.	再來把根音的位置當作座標，並且把格數(後面那個座標)在計算時的有效距離除以二(更符合實際季人體的手型)，這樣就會獲得一堆座標，然後把每一個在調內的音跟他座標距離最近那個位置調出來，然後把這一些音存成一個LIST，比方說如果我輸入7個音那這個LIST就會有7個內容，第一個是根音，剩下6個是跟根音距離最近的剩下六顆音的位置。但有例外，如下:
  5.	在取的時候，如果遇到跨弦(第一個座標有變動)，只要取弦的那個座標小於根音的就好，如果吉他指板不存在這條弦，並且尚未取到輸入調式的內音數量，那就考慮同一條弦上的其他格，再取一個位置。如果滿了就直接跟上面規則4一樣。
  6.	一個根音應該會對應到一組最小距離座標，以此類推，我就會生成出6組座標，把他分別存成6個座標為類內容的LIST，弦數由大排到小，格數由小排到大，並冠名1~6，print出來。
在經過大概2小時跟chatgpt的修正之後，我發現他給我的程式內容如果是用座標來判斷距離的話，會生成一些不在調內的音，並且會給我一些突破人體手指距離限制的按弦方法，因為程式體庫有點太大，所以我也很難找修正方法，所以我決定從頭建立一次。
(9)	我把兩個檔案關於「用音找位置」跟「用位置找音」的功能節和然後拆開成兩個函數叫做get_positions_from_note還有get_note_from_position。同時把找根音的函數叫做select_root也打上去，這樣我們就可以針對每一個音階找出合理的根音位置(其實就是默認把輸入的第一個東西當根音，然後找到他在弦上的最低音)
(10)	所以我整理一下，寫了一個find_root的簡單函數(這個是我自己寫的我覺得這個給chatgpt寫真的是太浪費時間)，反正他就是把上面的很多步驟變成一個，我輸入音階還有根音，他給我根音位置。
(11)	再來我要建立手型，因為上面的慘痛教訓，所以我決定和chatgpt約定一些方式。給chatgpt的指令如下:
  1.	人的手存在極限，大概是一條弦最多橫跨五格，比方說從第六弦第5格到第9格。
  2.	到第九格之後，合理的選擇是往上(弦數變小的位置)彈，如果上一個音出現在第六弦第9格，合理的選擇是第五弦的第5格以及之後到第9格的格子，畢竟如果是第五弦第4格，顯然跨度更大不合理。但如果前一個音符的位置小於第9格，就可以接受下一個位置存在在第五弦第4格到第8格，以此類推。
  3.	所以我希望接下來的函數判斷根運行邏輯是這樣:
    A.	接收到generate_scale這個函數的output，然後把裡面的absolute note這個list所代表的絕對音用get_positions_from_note表示出位置，一個音符應該以有數個位置
    B.	用find_root找到根音
    C.	根據根音，針對每一個音的數個位置，用下列方式選出最適合的一個位置。其一:我希望每個音只能出現一次，其二:每條弦最多出現三個音，第四個音要跨弦，也就是去弦數較小的下一弦彈奏，其三:這條弦的第一個音和第三個音不能超出第二點所述的五格的範圍，其四:跨弦的音也必須遵守第二點所述的範圍，其五:把七顆音都標示出來之後就結束
    D.	標示法:以c大調自然音階為例，程式應該print出:[(6,8),(6,10),(5,7),(5,8),(5,10),(4,7),(4,9)]
(12)	但這套邏輯出來的東西會把很多位置排除，所以我重打了一套邏輯，具體如下:
假設根音，或是說第一顆音位置在第a弦第b格，則這個手型在同一弦的允許範圍就是最多到a弦b+4格。而在這個規則之下，第四顆音或是第三顆音或許就會超出這個限制。因此他必須要往a-1弦移動，並且只能往a-1弦移動(畢竟一弦只能有三顆音)。這叫做跨弦，每次要跨弦的時候(可能是三和四之間跨弦或是六七之間跨弦或是五六之間跨弦之後的不限這幾種)，跨弦的這顆音允許的位置是a-1弦的第b-1到第b+2個位置，如果他的上一顆弦是在第a弦b+4格，那他的允許位置就是第a-1弦第b格吉以及之後的音。但如果他的上一顆弦是在第a弦b+3格或更之前，那他的允許位置就是第a-1弦第b-1格或更之前。注意，每條弦同樣適用同一條弦內的格數限制邏輯。而下一個出現的音的弦數必須小於等於上一個，格數必須大於上一個音。都優先考慮在同一條弦上面，直到那條弦已經有三顆音了或是第三或第二顆沒辦法在4格之內彈出來，這個時候時候才要跨弦。
(13)	結果仍然不理想，會出現太多錯誤或是漏掉的音符，所以我決定讓chat自己跑邏輯，我告訴他我現在有了這些工具，請他根據我的要求跑一個code出來，我來完善他。
(14)	但這樣有一點醜，所以我又花了幾個小時把他弄成了我喜歡的樣子。


5.	程式架構:
最終版本的程式檔案分成兩區，第一個部分是先備知識，具體如下:
名稱	功能
string_notes	一個list，由吉他指板弦數、格數以及對應的絕對音組成的，初期架設都是以他為依據。
STANDARD_TUNING	一個list，吉他的六弦標準調音，如果要引入特殊調弦可以直接改這裡
note_cycle	一個list，簡單的十二平均律順序
interval_semitones	一個字典，他把半音數量跟音程的概念結合，比方說"2m"就是小二度（Minor Second）
scale_patterns	一個字典，他把對應的調式名稱跟裡面的半音數量做對照，之後如果要新增調式結構可以直接改這裡就好。

第二部分是function，具體如下:
名稱	功能
generate_fretboard()	生成吉他指板的資料結構，其實跟上面的string notes有一點重疊到，後期的成主要是建立在這個上面。
get_positions_from_note(note)	輸入絕對音，他會找到這顆音在吉他上的所有位置，然後輸出一串list，比方說[(1, 8), (2, 3), (3, 10), (4, 5), (5, 1), (6, 8)]
get_note_from_position(string, fret)	輸入一個位置(弦數,格數)，他會告訴你這是甚麼音。
get_note_by_interval(start_note, interval)	輸入起始音和音程，他會回報音名
generate_scale(start_note, scale_type)	輸入起始音跟調名，他會回報級數跟調內音，比方說我給他C major回報就會是:(['1P', '2M', '3M', '4P', '5P', '6M', '7M'], ['C', 'D', 'E', 'F', 'G', 'A', 'B'])
select_root
find_root	都是在找根音，只是前者是給他位置，他會直接判斷成最低音那個，後者是給他起始音跟調式名，他會把那個起始音的最低音的那個位置print出來
plot_guitar_fretboard	主要程式，把上面提供的所有東西畫成一張指板圖
main()	互動式的內容放在這裡
然後再讓他跑個main就會運作了。


6.	總結:
總體而言，這個程式大概只有達成我預先目標的兩成，但我還是認為在現有函數的架構下，他有相當大的發展空間可以將其他的物件加進來。


8.	參考資料來源:
這次專案我大部分都是使用chatgpt讓他生程式給我，另外有一些細微的調整是我人工去嘗試。本專案沒有參考github。
